# Parser——Pascal-like 语法分析器
---
1. 题目：
构造一个小（Mini）语言的语法分析程序<br/>
2. 要求：
输入属性字文件，输出源程序是否符合语法要求的结果：
>正确——该程序符合语法要求。
>错误——指出错误位置。
如：
输入：`i：=1+；`
输出：表达式错误。
输入：`program exl; begin 1:=1 end.`
输出：该程序是正确的。
• 要求 Mini语言至少包含算术表达式、逻辑表达式、赋值语句、if-then 分支结构、while循环结构等基本控制结构。

---

## 项目简介

这是一个基于C++实现的类Pascal语言语法分析器，能够对类Pascal程序进行词法分析和语法分析，并构建抽象语法树（AST）。该分析器支持基本的程序结构、控制流语句和表达式。

## 功能特性

### 支持的语法结构
- ✅ 程序结构：`program`、`begin`、`end`、`.`
- ✅ 赋值语句：`变量 := 表达式`
- ✅ 控制结构：
  - `if-then` 和 `if-then-else` 分支
  - `while-do` 循环
  - `break` 语句
- ✅ 表达式：
  - 算术表达式（`+`、`-`、`*`、`/`、`mod`）
  - 条件表达式（`>`、`<`、`=`、`!=`、`<=`、`>=`）
  - 逻辑表达式（`and`、`or`、`not`）
- ✅ 注释：支持 `{ ... }` 格式的注释
- ✅ 错误处理：详细的错误位置和原因报告

### 语法限制说明
- 赋值语句左值必须是标识符（不能是数字）
- 条件表达式中括号内必须是完整的关系表达式，不能只是算术表达式
- 语句之间使用分号分隔，最后一条语句不需要分号
- 支持嵌套的 `begin-end` 块

## 项目结构

```
Parser/
├── parser.cpp          # 语法分析器主程序
├── input.txt           # 输入程序文件
├── output.txt          # 分析结果输出文件
└── README.md           # 项目说明文档
```

## 编译和运行

### 编译
```bash
g++ parser.cpp -o parser -std=c++14
```

### 运行
```bash
./parser
```

## 使用说明

1. 将待分析的程序代码写入 `input.txt` 文件
2. 运行程序：`./parser`
3. 查看分析结果：`output.txt` 文件将包含语法分析结果

### 输出格式
- **语法正确**：`该程序是正确的。`
- **语法错误**：`错误：错误描述（在行 X, 列 Y，遇到 'token'）`

## 语法规范

### 程序结构
```pascal
program 程序名;
begin
    语句列表
end.
```

### 语句类型
- 赋值语句：`变量 := 表达式`
- if语句：`if 条件 then 语句 [else 语句]`
- while语句：`while 条件 do 语句`
- break语句：`break`
- 语句块：`begin 语句列表 end`

### 表达式
- 算术表达式：支持 `+`, `-`, `*`, `/`, `mod` 运算符
- 条件表达式：支持 `>`, `<`, `=`, `!=`, `<=`, `>=` 关系运算符
- 逻辑表达式：支持 `and`, `or`, `not` 逻辑运算符

## 测试样例

### 测试样例1：简单程序
**输入：**
```pascal
program test1;
begin
    x := 5;
    y := x + 3 * 2
end.
```
**预期输出：** `该程序是正确的。`

### 测试样例2：if-then-else 结构
**输入：**
```pascal
program test2;
begin
    if a > b then
        max := a
    else
        max := b;
    if (x > 0) and (y < 10) then
        result := 1
end.
```
**预期输出：** `该程序是正确的。`

### 测试样例3：while 循环和 break
**输入：**
```pascal
program test3;
begin
    i := 0;
    while i < 10 do begin
        if i = 5 then break;
        i := i + 1
    end
end.
```
**预期输出：** `该程序是正确的。`

### 测试样例4：缺少结束点号
**输入：**
```pascal
program test4;
begin
    x := 1
end
```
**预期输出：** `错误：程序必须以点号结束（在行 4, 列 1，遇到 ''）`

### 测试样例5：赋值语句错误
**输入：**
```pascal
program test5;
begin
    1 := 5;
    y := 10
end.
```
**预期输出：** `错误：赋值语句左值必须是标识符（在行 3, 列 5，遇到 '1'）`

## 注意事项

1. 程序必须严格遵循Pascal语法规范
2. 标识符必须以字母开头，可以包含字母、数字和下划线
3. 注释使用 `{` 和 `}` 包裹
4. 条件表达式中避免在括号内只使用算术表达式
5. 最后一条语句后不需要分号
6. 所写的表达式需要为最简形式
    测试过程中发现
    `if a mod 2 = 0 then even := 1 else even := 0;`——可以通过
    `if (a mod 2) = 0 then even := 1 else even := 0;`——无法通过，因为括号是多余的，mod优先级高于=

## 技术实现

- 使用递归下降分析法进行语法分析
- 自动构建抽象语法树（AST）
- 详细的错误定位和报告
- 支持中文错误信息输出

## 扩展可能性

- 添加语义分析功能
- 支持更多Pascal特性（如过程、函数）
- 生成中间代码或目标代码
- 添加代码优化功能